!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="lib/",i(i.s=0)}([function(t,e,i){ezui={},i(1),i(2),i(3),i(4),i(5),i(6),i(7),ezui.init=function(t){ezui.uitls.isTop()&&(ezui.options.init(t),t.dictUrl&&ezui.dict.updateDict(t.dictUrl))}},function(t,e){ezui.uitls={isTop:function(){return top==self},timestampUrl:function(t){return t=-1!=t.indexOf("?")?t+"&t="+(new Date).getTime():t+"?t="+(new Date).getTime()},propertyArray:function(t,e){var i=new Array;for(item in t){var n=t[item][e];null!=n&&i.push(n)}return i}}},function(t,e){ezui.tips={successTip:function(t){window.top.$.messager.show({title:"提示",msg:t,timeout:2e3,showType:"fade"})},failedTip:function(t){window.top.$.messager.alert("出错了",t)}}},function(t,e){ezui.options={_options:null,init:function(t){let e=top==self;this._options=e?t||{}:window.top.ezui.options._options},set:function(t,e){this._options[t]=e},get:function(t){return this._options[t]||(this._options[t]={}),this._options[t]}}},function(t,e){ezui.data={_data:null,init:function(){let t=top==self;this._data=t?{}:window.top.ezui._data},set:function(t,e){this._data[t]=e},get:function(t){return this._data[t]||(this._data[t]={}),this._data[t]}},ezui.data.init()},function(t,e){$._originAjax=$.ajax,$.ajax=function(t){t.type||(t.type="POST"),t.dataType||(t.dataType="json");var e=!1;if("[object FormData]"==Object.prototype.toString.call(t.data)&&(e=!0),e&&"html"==t.dataType&&!t.success&&!t.error&&t.complete&&(t.success=t.complete,t.dataType="json",t.complete=void 0),e){var i=t.data.get("_maskId");i&&(t.maskId=i);var n=t.data.get("_maskMsg");n&&(t.maskMsg=n)}else t.data&&t.data._maskId&&(t.maskId=t.data._maskId),t.data&&t.data._maskMsg&&(t.maskMsg=t.data._maskMsg);var o=t.beforeSend;t.beforeSend=function(e){t.maskId&&$(t.maskId).LoadingOverlay("show",{text:t.maskMsg?t.maskMsg:"Loading...."}),o&&o(e)};var a=t.complete;t.complete=function(e,i){t.maskId&&$(t.maskId).LoadingOverlay("hide"),a&&a(e,i)};var s=t.error;t.error=function(e,i,n){switch(e.status){case 200:return void alert("必须返回Json对象，不能为空或者其它类型");case 500:e.responseJSON&&e.responseJSON.msg?$.messager.alert("出错了",e.responseJSON.msg,"warning"):$.messager.alert("未知的错误",e.responseText,"error");break;case 401:window.ezui.options._options.on401?window.ezui.options._options.on401(t):alert("无法识别当前用户，请重新登录");break;case 403:alert("无权限执行此操作"+e.status);break;case 404:alert("找不到服务"+e.status);break;case 408:alert("请求超时"+e.status);break;default:alert("未知错误"+e.status)}s&&s(e,i,n)};var r=t.success;t.success=function(t,e,i){t.tip&&$.messager.show({title:t.title,msg:t.msg,timeout:t.timeout,showType:t.showType}),r&&r(t,e,i)},console.log(t.dataType),$._originAjax(t)}},function(t,e){ezui.window={open:function(t,e,i){var n=$.extend({width:1024,height:600,title:"New Window",url:"",maximizable:!1,minimizable:!1,resizable:!0,modal:!0,onClosed:function(){}},t||{}),o="_iframe_"+(new Date).getTime();window.top.$("body",window.top.document).append(`<div style="overflow: hidden" id="_div_${o}"></div>`);var a=window.top.$("#_div_"+o,window.top.document);var s=`<iframe scrolling="auto" name="${o}" src="${ezui.uitls.timestampUrl(n.url)}" frameborder="0" style="width:100%;height:100%;" ></iframe><div style="clear:both;"/>`;a.append(s),a.window({title:n.title,width:n.width,height:n.height,modal:n.modal,collapsible:!1,minimizable:n.minimizable,maximizable:n.maximizable,resizable:n.resizable,closable:n.closable,onClose:function(){n.onClosed(),a.window("destroy")}}),ezui.data.get("_wins")[o]={callback:i||function(){},container:a,params:e}},close:function(t,e){let i=window.name;data&&((0,ezui.data.get("_wins")[i].callback)(t),e&&window.top.$.messager.show({title:"",msg:e,timeout:2e3,showType:"fade"}));Global.get("_wins")[i].container.window("close")},getParams:function(){let t=window.name;return ezui.data.get("_wins")[t].params},setTitle:function(t){let e=window.name;Global.get("_wins")[e].container.window("setTitle",t)}}},function(t,e){ezui.dict={updateDict:function(t){t||(t=ezui.options._options.dictUrl),t&&$.post(t,(function(t){ezui.data.set("_dict",t)}))},getDict:function(t){return ezui.data.get("_dict")[t]},getDictValue:function(t,e){let i=ezui.data.get("_dict"),n=null;if(i[t]){let o=i[t];for(index in o)if(dictItem=o[index],dictItem.value==e){n=dictItem.text;break}}return null==n?"-":n}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9VdGlscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvVGlwcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvT3B0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvRGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvQWpheEZpbHRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvV2luZG93LmpzIiwid2VicGFjazovLy8uL3NyYy9EaWN0LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZXp1aSIsImluaXQiLCJvcHRpb25zIiwidWl0bHMiLCJpc1RvcCIsImRpY3RVcmwiLCJkaWN0IiwidXBkYXRlRGljdCIsInRvcCIsInNlbGYiLCJ0aW1lc3RhbXBVcmwiLCJ1cmwiLCJpbmRleE9mIiwiRGF0ZSIsImdldFRpbWUiLCJwcm9wZXJ0eUFycmF5IiwiYXJyYXlEYXRhIiwicHJvcGVydHlOYW1lIiwicmVzdWx0IiwiQXJyYXkiLCJpdGVtIiwicmVzdWx0VmFsdWUiLCJ1bmRlZmluZWQiLCJwdXNoIiwidGlwcyIsInN1Y2Nlc3NUaXAiLCJtZXNzYWdlIiwid2luZG93IiwiJCIsIm1lc3NhZ2VyIiwic2hvdyIsInRpdGxlIiwibXNnIiwidGltZW91dCIsInNob3dUeXBlIiwiZmFpbGVkVGlwIiwiYWxlcnQiLCJfb3B0aW9ucyIsInRoaXMiLCJzZXQiLCJkYXRhIiwiX2RhdGEiLCJfb3JpZ2luQWpheCIsImFqYXgiLCJzZXR0aW5ncyIsInR5cGUiLCJkYXRhVHlwZSIsImZvcm1EYXRhIiwidG9TdHJpbmciLCJzdWNjZXNzIiwiZXJyb3IiLCJjb21wbGV0ZSIsIl9tYXNrSWQiLCJtYXNrSWQiLCJfbWFza01zZyIsIm1hc2tNc2ciLCJfYmVmb3JlU2VuZCIsImJlZm9yZVNlbmQiLCJ4aHIiLCJMb2FkaW5nT3ZlcmxheSIsInRleHQiLCJfY29tcGxldGUiLCJ0ZXh0U3RhdHVzIiwiX2Vycm9yIiwic3RhdHVzIiwicmVzcG9uc2VKU09OIiwicmVzcG9uc2VUZXh0Iiwib240MDEiLCJfc3VjY2VzcyIsInRpcCIsImNvbnNvbGUiLCJsb2ciLCJvcGVuIiwicGFyYW1zIiwiY2FsbGJhY2siLCJvcHRzIiwiZXh0ZW5kIiwid2lkdGgiLCJoZWlnaHQiLCJtYXhpbWl6YWJsZSIsIm1pbmltaXphYmxlIiwicmVzaXphYmxlIiwibW9kYWwiLCJvbkNsb3NlZCIsIndpbklkIiwiZG9jdW1lbnQiLCJhcHBlbmQiLCJ3aW5EaXYiLCJjb250ZW50IiwiY29sbGFwc2libGUiLCJjbG9zYWJsZSIsIm9uQ2xvc2UiLCJjb250YWluZXIiLCJjbG9zZSIsImNhbGxiYWNrUGFyYW1zIiwidG9wVGlwIiwid2luQ2FsbGJhY2siLCJHbG9iYWwiLCJnZXRQYXJhbXMiLCJzZXRUaXRsZSIsInBvc3QiLCJnZXREaWN0IiwiZGljdENvZGUiLCJnZXREaWN0VmFsdWUiLCJkaWN0SXRlbUNvZGUiLCJkaWN0SXRlbUFycmF5IiwiaW5kZXgiLCJkaWN0SXRlbSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkExQixFQUFvQmtCLEVBQUVPLEdBQ3RCWCxPQUFPQyxlQUFlVSxFQUFJLFVBQVcsQ0FBRVQsWUFBWSxFQUFNSyxNQUFPQSxJQUN0RCxFQUFQRSxHQUE0QixpQkFBVEYsRUFBbUIsSUFBSSxJQUFJTSxLQUFPTixFQUFPckIsRUFBb0JVLEVBQUVlLEVBQUlFLEVBQUssU0FBU0EsR0FBTyxPQUFPTixFQUFNTSxJQUFRQyxLQUFLLEtBQU1ELElBQzlJLE9BQU9GLEdBSVJ6QixFQUFvQjZCLEVBQUksU0FBUzFCLEdBQ2hDLElBQUlTLEVBQVNULEdBQVVBLEVBQU9xQixXQUM3QixXQUF3QixPQUFPckIsRUFBZ0IsU0FDL0MsV0FBOEIsT0FBT0EsR0FFdEMsT0FEQUgsRUFBb0JVLEVBQUVFLEVBQVEsSUFBS0EsR0FDNUJBLEdBSVJaLEVBQW9CYSxFQUFJLFNBQVNpQixFQUFRQyxHQUFZLE9BQU9qQixPQUFPa0IsVUFBVUMsZUFBZTFCLEtBQUt1QixFQUFRQyxJQUd6Ry9CLEVBQW9Ca0MsRUFBSSxPQUlqQmxDLEVBQW9CQSxFQUFvQm1DLEVBQUksRyxrQkNsRnJEQyxLQUFPLEdBQ1AsRUFBUSxHQUNSLEVBQVEsR0FDUixFQUFRLEdBQ1IsRUFBUSxHQUNSLEVBQVEsR0FDUixFQUFRLEdBQ1IsRUFBUSxHQUVSQSxLQUFLQyxLQUFPLFNBQVVDLEdBQ2RGLEtBQUtHLE1BQU1DLFVBQ1hKLEtBQUtFLFFBQVFELEtBQUtDLEdBRWRBLEVBQVFHLFNBQ1JMLEtBQUtNLEtBQUtDLFdBQVdMLEVBQVFHLFksY0NkekNMLEtBQUtHLE1BQVEsQ0FDVEMsTUFBTyxXQUNILE9BQU9JLEtBQU9DLE1BR2xCQyxhQUFjLFNBQVVDLEdBTXBCLE9BSklBLEdBRHFCLEdBQXJCQSxFQUFJQyxRQUFRLEtBQ05ELEVBQU0sT0FBUSxJQUFLRSxNQUFRQyxVQUUzQkgsRUFBTSxPQUFRLElBQUtFLE1BQVFDLFdBSXpDQyxjQUFlLFNBQVVDLEVBQVdDLEdBQ2hDLElBQUlDLEVBQVMsSUFBSUMsTUFDakIsSUFBS0MsUUFBUUosRUFBVyxDQUNwQixJQUFJSyxFQUFjTCxFQUFVSSxNQUFNSCxHQUNmSyxNQUFmRCxHQUNBSCxFQUFPSyxLQUFLRixHQUdwQixPQUFPSCxLLGNDckJmbEIsS0FBS3dCLEtBQU8sQ0FDUkMsV0FBWSxTQUFVQyxHQUNsQkMsT0FBT25CLElBQUlvQixFQUFFQyxTQUFTQyxLQUFLLENBQ3ZCQyxNQUFPLEtBQ1BDLElBQUtOLEVBQ0xPLFFBQVMsSUFDVEMsU0FBVSxVQUlsQkMsVUFBVyxTQUFVVCxHQUNqQkMsT0FBT25CLElBQUlvQixFQUFFQyxTQUFTTyxNQUFNLE1BQU9WLE0sY0NYM0MxQixLQUFLRSxRQUFVLENBQ1htQyxTQUFVLEtBRVZwQyxLQUFNLFNBQVVDLEdBQ1osSUFBSUUsRUFBUUksS0FBT0MsS0FFZjZCLEtBQUtELFNBRExqQyxFQUNnQkYsR0FBVyxHQUVYeUIsT0FBT25CLElBQUlSLEtBQUtFLFFBQVFtQyxVQUloREUsSUFBSyxTQUFVaEQsRUFBS04sR0FDaEJxRCxLQUFLRCxTQUFTOUMsR0FBT04sR0FHekJKLElBQUssU0FBVVUsR0FLWCxPQUpLK0MsS0FBS0QsU0FBUzlDLEtBQ2YrQyxLQUFLRCxTQUFTOUMsR0FBTyxJQUVaK0MsS0FBS0QsU0FBUzlDLE0sY0NwQm5DUyxLQUFLd0MsS0FBTyxDQUNSQyxNQUFPLEtBRVB4QyxLQUFNLFdBQ0YsSUFBSUcsRUFBUUksS0FBT0MsS0FFZjZCLEtBQUtHLE1BRExyQyxFQUNhLEdBRUF1QixPQUFPbkIsSUFBSVIsS0FBS3lDLE9BSXJDRixJQUFLLFNBQVVoRCxFQUFLaUQsR0FDaEJGLEtBQUtHLE1BQU1sRCxHQUFPaUQsR0FHdEIzRCxJQUFLLFNBQVVVLEdBS1gsT0FKSytDLEtBQUtHLE1BQU1sRCxLQUNaK0MsS0FBS0csTUFBTWxELEdBQU8sSUFFVCtDLEtBQUtHLE1BQU1sRCxLQUloQ1MsS0FBS3dDLEtBQUt2QyxRLGNDeEJWMkIsRUFBRWMsWUFBY2QsRUFBRWUsS0FDbEJmLEVBQUVlLEtBQU8sU0FBVUMsR0FHVkEsRUFBU0MsT0FDVkQsRUFBU0MsS0FBTyxRQUVmRCxFQUFTRSxXQUNWRixFQUFTRSxTQUFXLFFBSXhCLElBQUlDLEdBQVcsRUFjZixHQWJxRCxxQkFBakRyRSxPQUFPa0IsVUFBVW9ELFNBQVM3RSxLQUFLeUUsRUFBU0osUUFDeENPLEdBQVcsR0FJWEEsR0FBaUMsUUFBckJILEVBQVNFLFdBQXVCRixFQUFTSyxVQUFZTCxFQUFTTSxPQUFTTixFQUFTTyxXQUM1RlAsRUFBU0ssUUFBVUwsRUFBU08sU0FDNUJQLEVBQVNFLFNBQVcsT0FDcEJGLEVBQVNPLGNBQVc3QixHQUtwQnlCLEVBQVUsQ0FDVixJQUFJSyxFQUFVUixFQUFTSixLQUFLM0QsSUFBSSxXQUM1QnVFLElBQ0FSLEVBQVNTLE9BQVNELEdBRXRCLElBQUlFLEVBQVdWLEVBQVNKLEtBQUszRCxJQUFJLFlBQzdCeUUsSUFDQVYsRUFBU1csUUFBVUQsUUFHbkJWLEVBQVNKLE1BQVFJLEVBQVNKLEtBQUtZLFVBQy9CUixFQUFTUyxPQUFTVCxFQUFTSixLQUFLWSxTQUVoQ1IsRUFBU0osTUFBUUksRUFBU0osS0FBS2MsV0FDL0JWLEVBQVNXLFFBQVVYLEVBQVNKLEtBQUtjLFVBTXpDLElBQUlFLEVBQWNaLEVBQVNhLFdBQzNCYixFQUFTYSxXQUFhLFNBQVVDLEdBQ3hCZCxFQUFTUyxRQUNUekIsRUFBRWdCLEVBQVNTLFFBQVFNLGVBQWUsT0FBUSxDQUN0Q0MsS0FBTWhCLEVBQVNXLFFBQVVYLEVBQVNXLFFBQVUsZ0JBR2hEQyxHQUNBQSxFQUFZRSxJQUtwQixJQUFJRyxFQUFZakIsRUFBU08sU0FDekJQLEVBQVNPLFNBQVcsU0FBVU8sRUFBS0ksR0FDM0JsQixFQUFTUyxRQUNUekIsRUFBRWdCLEVBQVNTLFFBQVFNLGVBQWUsUUFFbENFLEdBQ0FBLEVBQVVILEVBQUtJLElBS3ZCLElBQUlDLEVBQVNuQixFQUFTTSxNQUN0Qk4sRUFBU00sTUFBUSxTQUFVUSxFQUFLTSxFQUFRZCxHQUNwQyxPQUFRUSxFQUFJTSxRQUNSLEtBQUssSUFHRCxZQURBNUIsTUFBTSx5QkFFVixLQUFLLElBQ0dzQixFQUFJTyxjQUFnQlAsRUFBSU8sYUFBYWpDLElBQ3JDSixFQUFFQyxTQUFTTyxNQUFNLE1BQU9zQixFQUFJTyxhQUFhakMsSUFBSyxXQUU5Q0osRUFBRUMsU0FBU08sTUFBTSxRQUFTc0IsRUFBSVEsYUFBYyxTQUVoRCxNQUNKLEtBQUssSUFDR3ZDLE9BQU8zQixLQUFLRSxRQUFRbUMsU0FBUzhCLE1BQzdCeEMsT0FBTzNCLEtBQUtFLFFBQVFtQyxTQUFTOEIsTUFBTXZCLEdBRW5DUixNQUFNLGtCQUVWLE1BQ0osS0FBSyxJQUNEQSxNQUFNLFdBQWFzQixFQUFJTSxRQUN2QixNQUNKLEtBQUssSUFDRDVCLE1BQU0sUUFBVXNCLEVBQUlNLFFBQ3BCLE1BQ0osS0FBSyxJQUNENUIsTUFBTSxPQUFTc0IsRUFBSU0sUUFDbkIsTUFDSixRQUNJNUIsTUFBTSxPQUFTc0IsRUFBSU0sUUFHdkJELEdBQ0FBLEVBQU9MLEVBQUtNLEVBQVFkLElBTTVCLElBQUlrQixFQUFXeEIsRUFBU0ssUUFDeEJMLEVBQVNLLFFBQVUsU0FBVS9CLEVBQVE4QyxFQUFRTixHQUNyQ3hDLEVBQU9tRCxLQUNQekMsRUFBRUMsU0FBU0MsS0FBSyxDQUNaQyxNQUFPYixFQUFPYSxNQUNkQyxJQUFLZCxFQUFPYyxJQUNaQyxRQUFTZixFQUFPZSxRQUNoQkMsU0FBVWhCLEVBQU9nQixXQUlyQmtDLEdBQ0FBLEVBQVNsRCxFQUFROEMsRUFBUU4sSUFJakNZLFFBQVFDLElBQUkzQixFQUFTRSxVQUNyQmxCLEVBQUVjLFlBQVlFLEssY0NoSWxCNUMsS0FBSzJCLE9BQVMsQ0FDVjZDLEtBQU0sU0FBVXRFLEVBQVN1RSxFQUFRQyxHQUU3QixJQUFJQyxFQUFPL0MsRUFBRWdELE9BQU8sQ0FDaEJDLE1BQU8sS0FDUEMsT0FBUSxJQUNSL0MsTUFBTyxhQUNQcEIsSUFBSyxHQUNMb0UsYUFBYSxFQUNiQyxhQUFhLEVBQ2JDLFdBQVcsRUFDWEMsT0FBTyxFQUNQQyxTQUFVLGNBRVhqRixHQUFXLElBSVZrRixFQUFRLFlBQWEsSUFBS3ZFLE1BQVFDLFVBRXRDYSxPQUFPbkIsSUFBSW9CLEVBQUUsT0FBUUQsT0FBT25CLElBQUk2RSxVQUFVQyxPQUFPLDBDQUEwQ0YsYUFDM0YsSUFBSUcsRUFBUzVELE9BQU9uQixJQUFJb0IsRUFBRSxTQUFTd0QsRUFBU3pELE9BQU9uQixJQUFJNkUsVUFNdkQsSUFBSUcsRUFBVSxrQ0FBa0NKLFdBSHRDcEYsS0FBS0csTUFBTU8sYUFBYWlFLEVBQUtoRSw2RkFJdkM0RSxFQUFPRCxPQUFPRSxHQUdkRCxFQUFPNUQsT0FBTyxDQUNWSSxNQUFPNEMsRUFBSzVDLE1BQ1o4QyxNQUFPRixFQUFLRSxNQUNaQyxPQUFRSCxFQUFLRyxPQUNiSSxNQUFPUCxFQUFLTyxNQUNaTyxhQUFhLEVBQ2JULFlBQWFMLEVBQUtLLFlBQ2xCRCxZQUFhSixFQUFLSSxZQUNsQkUsVUFBV04sRUFBS00sVUFDaEJTLFNBQVNmLEVBQUtlLFNBQ2RDLFFBQVMsV0FDTGhCLEVBQUtRLFdBQ0xJLEVBQU81RCxPQUFPLGNBS3RCM0IsS0FBS3dDLEtBQUszRCxJQUFJLFNBQVN1RyxHQUFTLENBQzVCVixTQUFVQSxHQUFZLGFBQ3RCa0IsVUFBV0wsRUFDWGQsT0FBUUEsSUFJaEJvQixNQUFPLFNBQVVDLEVBQWdCQyxHQUM3QixJQUFJWCxFQUFRekQsT0FBT3BELEtBQ2ZpRSxRQUVBd0QsRUFEa0JoRyxLQUFLd0MsS0FBSzNELElBQUksU0FBU3VHLEdBQU9WLFVBQ3BDb0IsR0FDUkMsR0FDQXBFLE9BQU9uQixJQUFJb0IsRUFBRUMsU0FBU0MsS0FBSyxDQUN2QkMsTUFBTyxHQUNQQyxJQUFLK0QsRUFDTDlELFFBQVMsSUFDVEMsU0FBVSxVQUlUK0QsT0FBT3BILElBQUksU0FBU3VHLEdBQU9RLFVBQ2pDakUsT0FBTyxVQUVsQnVFLFVBQVcsV0FDUCxJQUFJZCxFQUFRekQsT0FBT3BELEtBQ25CLE9BQU95QixLQUFLd0MsS0FBSzNELElBQUksU0FBU3VHLEdBQU9YLFFBRXpDMEIsU0FBVSxTQUFVcEUsR0FDaEIsSUFBSXFELEVBQVF6RCxPQUFPcEQsS0FDTjBILE9BQU9wSCxJQUFJLFNBQVN1RyxHQUFPUSxVQUNqQ2pFLE9BQU8sV0FBWUksTSxjQy9FbEMvQixLQUFLTSxLQUFPLENBQ1JDLFdBQVksU0FBVUksR0FDYkEsSUFDREEsRUFBTVgsS0FBS0UsUUFBUW1DLFNBQVNoQyxTQUUzQk0sR0FHTGlCLEVBQUV3RSxLQUFLekYsR0FBSyxTQUFVNkIsR0FDbEJ4QyxLQUFLd0MsS0FBS0QsSUFBSSxRQUFTQyxPQUcvQjZELFFBQVMsU0FBVUMsR0FFZixPQURXdEcsS0FBS3dDLEtBQUszRCxJQUFJLFNBQ2J5SCxJQUVoQkMsYUFBYyxTQUFVRCxFQUFVRSxHQUM5QixJQUFJbEcsRUFBT04sS0FBS3dDLEtBQUszRCxJQUFJLFNBQ3JCcUMsRUFBUyxLQUNiLEdBQUlaLEVBQUtnRyxHQUFXLENBQ2hCLElBQUlHLEVBQWdCbkcsRUFBS2dHLEdBQ3pCLElBQUtJLFNBQVNELEVBRVYsR0FEQUUsU0FBV0YsRUFBY0MsT0FDckJDLFNBQVMxSCxPQUFTdUgsRUFBYyxDQUNoQ3RGLEVBQVN5RixTQUFTL0MsS0FDbEIsT0FJWixPQUFpQixNQUFWMUMsRUFBaUIsSUFBTUEiLCJmaWxlIjoiZXp1aS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwibGliL1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJlenVpID0ge307XHJcbnJlcXVpcmUoXCIuL1V0aWxzXCIpO1xyXG5yZXF1aXJlKFwiLi9UaXBzXCIpO1xyXG5yZXF1aXJlKFwiLi9PcHRpb25zXCIpO1xyXG5yZXF1aXJlKFwiLi9EYXRhXCIpO1xyXG5yZXF1aXJlKFwiLi9BamF4RmlsdGVyXCIpO1xyXG5yZXF1aXJlKFwiLi9XaW5kb3dcIik7XHJcbnJlcXVpcmUoXCIuL0RpY3RcIik7XHJcblxyXG5lenVpLmluaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgaWYgKGV6dWkudWl0bHMuaXNUb3AoKSkge1xyXG4gICAgICAgIGV6dWkub3B0aW9ucy5pbml0KG9wdGlvbnMpO1xyXG4gICAgICAgIC8v5Yid5aeL5YyW5a2X5YW4XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuZGljdFVybCkge1xyXG4gICAgICAgICAgICBlenVpLmRpY3QudXBkYXRlRGljdChvcHRpb25zLmRpY3RVcmwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iLCJlenVpLnVpdGxzID0ge1xyXG4gICAgaXNUb3A6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdG9wID09IHNlbGY7XHJcbiAgICB9LFxyXG5cclxuICAgIHRpbWVzdGFtcFVybDogZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgIGlmICh1cmwuaW5kZXhPZignPycpICE9IC0xKSB7XHJcbiAgICAgICAgICAgIHVybCA9IHVybCArICcmdD0nICsgKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1cmwgPSB1cmwgKyAnP3Q9JyArIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1cmw7XHJcbiAgICB9LFxyXG4gICAgcHJvcGVydHlBcnJheTogZnVuY3Rpb24gKGFycmF5RGF0YSwgcHJvcGVydHlOYW1lKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIGZvciAoaXRlbSBpbiBhcnJheURhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdFZhbHVlID0gYXJyYXlEYXRhW2l0ZW1dW3Byb3BlcnR5TmFtZV07XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRWYWx1ZSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJlc3VsdFZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSxcclxuXHJcbn0iLCJlenVpLnRpcHMgPSB7XHJcbiAgICBzdWNjZXNzVGlwOiBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgIHdpbmRvdy50b3AuJC5tZXNzYWdlci5zaG93KHtcclxuICAgICAgICAgICAgdGl0bGU6ICfmj5DnpLonLFxyXG4gICAgICAgICAgICBtc2c6IG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHRpbWVvdXQ6IDIwMDAsXHJcbiAgICAgICAgICAgIHNob3dUeXBlOiAnZmFkZSdcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgZmFpbGVkVGlwOiBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgIHdpbmRvdy50b3AuJC5tZXNzYWdlci5hbGVydCgn5Ye66ZSZ5LqGJywgbWVzc2FnZSk7XHJcbiAgICB9LFxyXG59IiwiZXp1aS5vcHRpb25zID0ge1xyXG4gICAgX29wdGlvbnM6IG51bGwsXHJcblxyXG4gICAgaW5pdDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICBsZXQgaXNUb3AgPSB0b3AgPT0gc2VsZjtcclxuICAgICAgICBpZiAoaXNUb3ApIHtcclxuICAgICAgICAgICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fb3B0aW9ucyA9IHdpbmRvdy50b3AuZXp1aS5vcHRpb25zLl9vcHRpb25zO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgc2V0OiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX29wdGlvbnNba2V5XSA9IHZhbHVlO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXQ6IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX29wdGlvbnNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLl9vcHRpb25zW2tleV0gPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuX29wdGlvbnNba2V5XTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG59XHJcbiIsImV6dWkuZGF0YSA9IHtcclxuICAgIF9kYXRhOiBudWxsLFxyXG5cclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgaXNUb3AgPSB0b3AgPT0gc2VsZjtcclxuICAgICAgICBpZiAoaXNUb3ApIHtcclxuICAgICAgICAgICAgdGhpcy5fZGF0YSA9IHt9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RhdGEgPSB3aW5kb3cudG9wLmV6dWkuX2RhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzZXQ6IGZ1bmN0aW9uIChrZXksIGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9kYXRhW2tleV0gPSBkYXRhO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXQ6IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2RhdGFba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kYXRhW2tleV0gPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuX2RhdGFba2V5XTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG59XHJcbmV6dWkuZGF0YS5pbml0KCk7IiwiJC5fb3JpZ2luQWpheCA9ICQuYWpheDtcclxuJC5hamF4ID0gZnVuY3Rpb24gKHNldHRpbmdzKSB7XHJcblxyXG4gICAgLy/pu5jorqRQT1NU6K+35rGCXHJcbiAgICBpZiAoIXNldHRpbmdzLnR5cGUpIHtcclxuICAgICAgICBzZXR0aW5ncy50eXBlID0gJ1BPU1QnO1xyXG4gICAgfVxyXG4gICAgaWYgKCFzZXR0aW5ncy5kYXRhVHlwZSkge1xyXG4gICAgICAgIHNldHRpbmdzLmRhdGFUeXBlID0gJ2pzb24nOyAvL+azqOaEj++8jOiLpeacjeWKoeerr+ayoei/lOWbnmpzb27moLzlvI/nmoTmlbDmja7vvIzkuZ/kvJrov5vlhaVlcnJvclxyXG4gICAgfVxyXG5cclxuICAgIC8vIGVhc3l1aSBmb3JtIOS8muaPkOS6pEZvcm1EYXRh6ICM5LiN5pivanNvbu+8jGVhc3l1aS5taW4uanMgODgzM+ihjOacieaUueWKqO+8jOm7mOiupGRhdGFUeXBl5L+u5pS55Li6anNvbizlubbljLrliIbkuoZzdWNjZXNz44CBZXJyb3LmnaXku6Pmm79jb21wbGV0ZVxyXG4gICAgdmFyIGZvcm1EYXRhID0gZmFsc2U7XHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHNldHRpbmdzLmRhdGEpID09ICdbb2JqZWN0IEZvcm1EYXRhXScpIHtcclxuICAgICAgICBmb3JtRGF0YSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5YW45Z6L55qEZWFzeXVpIGZvcm0s5bCG5YW25L+u5pS55Li65pmu6YCa55qE5pa55byP77ya57uf5LiA5oum5oiq6ZSZ6K+v5bm25o+Q56S677yM5aaC5p6c5oiQ5Yqf5YiZ5Zue6LCD6Ieq5a6a5LmJ55qEc3VjY2Vzc1xyXG4gICAgaWYgKGZvcm1EYXRhICYmIHNldHRpbmdzLmRhdGFUeXBlID09ICdodG1sJyAmJiAhc2V0dGluZ3Muc3VjY2VzcyAmJiAhc2V0dGluZ3MuZXJyb3IgJiYgc2V0dGluZ3MuY29tcGxldGUpIHtcclxuICAgICAgICBzZXR0aW5ncy5zdWNjZXNzID0gc2V0dGluZ3MuY29tcGxldGU7XHJcbiAgICAgICAgc2V0dGluZ3MuZGF0YVR5cGUgPSAnanNvbic7XHJcbiAgICAgICAgc2V0dGluZ3MuY29tcGxldGUgPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8v6I635Y+W6YGu572p6K6+572uXHJcbiAgICBpZiAoZm9ybURhdGEpIHsvL+S7jkZvcm1EYXRh5Lit6I635b6XbWFza0lk55qE5YC8XHJcbiAgICAgICAgdmFyIF9tYXNrSWQgPSBzZXR0aW5ncy5kYXRhLmdldChcIl9tYXNrSWRcIik7XHJcbiAgICAgICAgaWYgKF9tYXNrSWQpIHtcclxuICAgICAgICAgICAgc2V0dGluZ3MubWFza0lkID0gX21hc2tJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIF9tYXNrTXNnID0gc2V0dGluZ3MuZGF0YS5nZXQoXCJfbWFza01zZ1wiKTtcclxuICAgICAgICBpZiAoX21hc2tNc2cpIHtcclxuICAgICAgICAgICAgc2V0dGluZ3MubWFza01zZyA9IF9tYXNrTXNnO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmRhdGEgJiYgc2V0dGluZ3MuZGF0YS5fbWFza0lkKSB7XHJcbiAgICAgICAgICAgIHNldHRpbmdzLm1hc2tJZCA9IHNldHRpbmdzLmRhdGEuX21hc2tJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmRhdGEgJiYgc2V0dGluZ3MuZGF0YS5fbWFza01zZykge1xyXG4gICAgICAgICAgICBzZXR0aW5ncy5tYXNrTXNnID0gc2V0dGluZ3MuZGF0YS5fbWFza01zZztcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8v6K+35rGC5YmN6LCD55So55qE5Ye95pWwXHJcbiAgICB2YXIgX2JlZm9yZVNlbmQgPSBzZXR0aW5ncy5iZWZvcmVTZW5kO1xyXG4gICAgc2V0dGluZ3MuYmVmb3JlU2VuZCA9IGZ1bmN0aW9uICh4aHIpIHtcclxuICAgICAgICBpZiAoc2V0dGluZ3MubWFza0lkKSB7Ly/liqDovb3pga7nvalcclxuICAgICAgICAgICAgJChzZXR0aW5ncy5tYXNrSWQpLkxvYWRpbmdPdmVybGF5KFwic2hvd1wiLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBzZXR0aW5ncy5tYXNrTXNnID8gc2V0dGluZ3MubWFza01zZyA6ICdMb2FkaW5nLi4uLidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKF9iZWZvcmVTZW5kKSB7XHJcbiAgICAgICAgICAgIF9iZWZvcmVTZW5kKHhocik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8v6K+35rGC5a6M5oiQ5pe26LCD55So55qE5Ye95pWwXHJcbiAgICB2YXIgX2NvbXBsZXRlID0gc2V0dGluZ3MuY29tcGxldGU7XHJcbiAgICBzZXR0aW5ncy5jb21wbGV0ZSA9IGZ1bmN0aW9uICh4aHIsIHRleHRTdGF0dXMpIHtcclxuICAgICAgICBpZiAoc2V0dGluZ3MubWFza0lkKSB7Ly/lj5bmtojpga7nvalcclxuICAgICAgICAgICAgJChzZXR0aW5ncy5tYXNrSWQpLkxvYWRpbmdPdmVybGF5KFwiaGlkZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKF9jb21wbGV0ZSkge1xyXG4gICAgICAgICAgICBfY29tcGxldGUoeGhyLCB0ZXh0U3RhdHVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgLy/or7fmsYLlpLHotKXml7bosIPnlKjnmoTlh73mlbBcclxuICAgIHZhciBfZXJyb3IgPSBzZXR0aW5ncy5lcnJvcjtcclxuICAgIHNldHRpbmdzLmVycm9yID0gZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xyXG4gICAgICAgIHN3aXRjaCAoeGhyLnN0YXR1cykge1xyXG4gICAgICAgICAgICBjYXNlICgyMDApOlxyXG4gICAgICAgICAgICAgICAgLy/lpoLmnpzmjIflrppkYXRhVHlwZeaYr2pzb24s5L2G5piv5pyN5Yqh56uv5rKh6L+U5ZueanNvbuagvOW8j+eahOaVsOaNru+8jOS5n+S8mui/m+WFpWVycm9y77yM5bi46KeB5LqOY29udHJvbGxlcui/lOWbnnZvaWTvvIzkuI3lv4XnkIbkvJpcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwi5b+F6aG76L+U5ZueSnNvbuWvueixoe+8jOS4jeiDveS4uuepuuaIluiAheWFtuWug+exu+Wei1wiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgY2FzZSAoNTAwKTpcclxuICAgICAgICAgICAgICAgIGlmICh4aHIucmVzcG9uc2VKU09OICYmIHhoci5yZXNwb25zZUpTT04ubXNnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5tZXNzYWdlci5hbGVydCgn5Ye66ZSZ5LqGJywgeGhyLnJlc3BvbnNlSlNPTi5tc2csICd3YXJuaW5nJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQubWVzc2FnZXIuYWxlcnQoJ+acquefpeeahOmUmeivrycsIHhoci5yZXNwb25zZVRleHQsICdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgKDQwMSk6XHJcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LmV6dWkub3B0aW9ucy5fb3B0aW9ucy5vbjQwMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5lenVpLm9wdGlvbnMuX29wdGlvbnMub240MDEoc2V0dGluZ3MpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfml6Dms5Xor4bliKvlvZPliY3nlKjmiLfvvIzor7fph43mlrDnmbvlvZUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICg0MDMpOlxyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCLml6DmnYPpmZDmiafooYzmraTmk43kvZxcIiArIHhoci5zdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgKDQwNCk6XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIuaJvuS4jeWIsOacjeWKoVwiICsgeGhyLnN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAoNDA4KTpcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwi6K+35rGC6LaF5pe2XCIgKyB4aHIuc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCLmnKrnn6XplJnor69cIiArIHhoci5zdGF0dXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKF9lcnJvcikge1xyXG4gICAgICAgICAgICBfZXJyb3IoeGhyLCBzdGF0dXMsIGVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8v6K+35rGC5oiQ5Yqf5pe26LCD55So55qE5Ye95pWwXHJcbiAgICB2YXIgX3N1Y2Nlc3MgPSBzZXR0aW5ncy5zdWNjZXNzO1xyXG4gICAgc2V0dGluZ3Muc3VjY2VzcyA9IGZ1bmN0aW9uIChyZXN1bHQsIHN0YXR1cywgeGhyKSB7XHJcbiAgICAgICAgaWYgKHJlc3VsdC50aXApIHtcclxuICAgICAgICAgICAgJC5tZXNzYWdlci5zaG93KHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiByZXN1bHQudGl0bGUsXHJcbiAgICAgICAgICAgICAgICBtc2c6IHJlc3VsdC5tc2csXHJcbiAgICAgICAgICAgICAgICB0aW1lb3V0OiByZXN1bHQudGltZW91dCxcclxuICAgICAgICAgICAgICAgIHNob3dUeXBlOiByZXN1bHQuc2hvd1R5cGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoX3N1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgX3N1Y2Nlc3MocmVzdWx0LCBzdGF0dXMsIHhocik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKHNldHRpbmdzLmRhdGFUeXBlKTtcclxuICAgICQuX29yaWdpbkFqYXgoc2V0dGluZ3MpO1xyXG59XHJcblxyXG4iLCJlenVpLndpbmRvdyA9IHtcclxuICAgIG9wZW46IGZ1bmN0aW9uIChvcHRpb25zLCBwYXJhbXMsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgLy/orr7nva7pu5jorqTnqpflj6Ppo47moLxcclxuICAgICAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtcclxuICAgICAgICAgICAgd2lkdGg6IDEwMjQsXHJcbiAgICAgICAgICAgIGhlaWdodDogNjAwLFxyXG4gICAgICAgICAgICB0aXRsZTogJ05ldyBXaW5kb3cnLFxyXG4gICAgICAgICAgICB1cmw6ICcnLFxyXG4gICAgICAgICAgICBtYXhpbWl6YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIG1pbmltaXphYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBtb2RhbDogdHJ1ZSxcclxuICAgICAgICAgICAgb25DbG9zZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIG9wdGlvbnMgfHwge30pO1xyXG5cclxuXHJcbiAgICAgICAgLy/mnoTpgKDnqpflj6PlrrnlmahcclxuICAgICAgICB2YXIgd2luSWQgPSBcIl9pZnJhbWVfXCIgKyAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xyXG5cclxuICAgICAgICB3aW5kb3cudG9wLiQoJ2JvZHknLCB3aW5kb3cudG9wLmRvY3VtZW50KS5hcHBlbmQoYDxkaXYgc3R5bGU9XCJvdmVyZmxvdzogaGlkZGVuXCIgaWQ9XCJfZGl2XyR7d2luSWR9XCI+PC9kaXY+YClcclxuICAgICAgICB2YXIgd2luRGl2ID0gd2luZG93LnRvcC4kKGAjX2Rpdl8ke3dpbklkfWAsIHdpbmRvdy50b3AuZG9jdW1lbnQpO1xyXG5cclxuICAgICAgICAvL3VybOWKoOS4iuaXtumXtOaIs+WQjue8gFxyXG4gICAgICAgIGxldCB1cmwgPSBlenVpLnVpdGxzLnRpbWVzdGFtcFVybChvcHRzLnVybCk7XHJcblxyXG4gICAgICAgIC8v5Zyo5a655Zmo5Lit5Yqg6L29aWZyYW1lXHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSBgPGlmcmFtZSBzY3JvbGxpbmc9XCJhdXRvXCIgbmFtZT1cIiR7d2luSWR9XCIgc3JjPVwiJHt1cmx9XCIgZnJhbWVib3JkZXI9XCIwXCIgc3R5bGU9XCJ3aWR0aDoxMDAlO2hlaWdodDoxMDAlO1wiID48L2lmcmFtZT48ZGl2IHN0eWxlPVwiY2xlYXI6Ym90aDtcIi8+YDtcclxuICAgICAgICB3aW5EaXYuYXBwZW5kKGNvbnRlbnQpO1xyXG5cclxuICAgICAgICAvL+eUqGVhc3l1aeaJk+W8gOeql+WPo1xyXG4gICAgICAgIHdpbkRpdi53aW5kb3coe1xyXG4gICAgICAgICAgICB0aXRsZTogb3B0cy50aXRsZSxcclxuICAgICAgICAgICAgd2lkdGg6IG9wdHMud2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogb3B0cy5oZWlnaHQsXHJcbiAgICAgICAgICAgIG1vZGFsOiBvcHRzLm1vZGFsLFxyXG4gICAgICAgICAgICBjb2xsYXBzaWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIG1pbmltaXphYmxlOiBvcHRzLm1pbmltaXphYmxlLFxyXG4gICAgICAgICAgICBtYXhpbWl6YWJsZTogb3B0cy5tYXhpbWl6YWJsZSxcclxuICAgICAgICAgICAgcmVzaXphYmxlOiBvcHRzLnJlc2l6YWJsZSxcclxuICAgICAgICAgICAgY2xvc2FibGU6b3B0cy5jbG9zYWJsZSxcclxuICAgICAgICAgICAgb25DbG9zZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgb3B0cy5vbkNsb3NlZCgpO1xyXG4gICAgICAgICAgICAgICAgd2luRGl2LndpbmRvdygnZGVzdHJveScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8v5rOo5YaM56qX5Y+j5L+h5oGvXHJcbiAgICAgICAgZXp1aS5kYXRhLmdldCgnX3dpbnMnKVt3aW5JZF0gPSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayB8fCBmdW5jdGlvbiAoKSB7IH0sXHJcbiAgICAgICAgICAgIGNvbnRhaW5lcjogd2luRGl2LFxyXG4gICAgICAgICAgICBwYXJhbXM6IHBhcmFtc1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSxcclxuICAgIGNsb3NlOiBmdW5jdGlvbiAoY2FsbGJhY2tQYXJhbXMsIHRvcFRpcCkge1xyXG4gICAgICAgIGxldCB3aW5JZCA9IHdpbmRvdy5uYW1lO1xyXG4gICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciB3aW5DYWxsYmFjayA9IGV6dWkuZGF0YS5nZXQoJ193aW5zJylbd2luSWRdLmNhbGxiYWNrO1xyXG4gICAgICAgICAgICB3aW5DYWxsYmFjayhjYWxsYmFja1BhcmFtcyk7XHJcbiAgICAgICAgICAgIGlmICh0b3BUaXApIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy50b3AuJC5tZXNzYWdlci5zaG93KHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgbXNnOiB0b3BUaXAsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMjAwMCxcclxuICAgICAgICAgICAgICAgICAgICBzaG93VHlwZTogJ2ZhZGUnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgd2luRGl2ID0gR2xvYmFsLmdldCgnX3dpbnMnKVt3aW5JZF0uY29udGFpbmVyO1xyXG4gICAgICAgIHdpbkRpdi53aW5kb3coJ2Nsb3NlJyk7XHJcbiAgICB9LFxyXG4gICAgZ2V0UGFyYW1zOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IHdpbklkID0gd2luZG93Lm5hbWU7XHJcbiAgICAgICAgcmV0dXJuIGV6dWkuZGF0YS5nZXQoJ193aW5zJylbd2luSWRdLnBhcmFtcztcclxuICAgIH0sXHJcbiAgICBzZXRUaXRsZTogZnVuY3Rpb24gKHRpdGxlKSB7XHJcbiAgICAgICAgbGV0IHdpbklkID0gd2luZG93Lm5hbWU7XHJcbiAgICAgICAgbGV0IHdpbkRpdiA9IEdsb2JhbC5nZXQoJ193aW5zJylbd2luSWRdLmNvbnRhaW5lcjtcclxuICAgICAgICB3aW5EaXYud2luZG93KCdzZXRUaXRsZScsIHRpdGxlKTtcclxuICAgIH0sXHJcbn0iLCJlenVpLmRpY3QgPSB7XHJcbiAgICB1cGRhdGVEaWN0OiBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgaWYgKCF1cmwpIHtcclxuICAgICAgICAgICAgdXJsID0gZXp1aS5vcHRpb25zLl9vcHRpb25zLmRpY3RVcmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdXJsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgJC5wb3N0KHVybCwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgZXp1aS5kYXRhLnNldCgnX2RpY3QnLCBkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBnZXREaWN0OiBmdW5jdGlvbiAoZGljdENvZGUpIHtcclxuICAgICAgICBsZXQgZGljdCA9IGV6dWkuZGF0YS5nZXQoJ19kaWN0Jyk7XHJcbiAgICAgICAgcmV0dXJuIGRpY3RbZGljdENvZGVdO1xyXG4gICAgfSxcclxuICAgIGdldERpY3RWYWx1ZTogZnVuY3Rpb24gKGRpY3RDb2RlLCBkaWN0SXRlbUNvZGUpIHtcclxuICAgICAgICBsZXQgZGljdCA9IGV6dWkuZGF0YS5nZXQoJ19kaWN0Jyk7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IG51bGw7XHJcbiAgICAgICAgaWYgKGRpY3RbZGljdENvZGVdKSB7XHJcbiAgICAgICAgICAgIGxldCBkaWN0SXRlbUFycmF5ID0gZGljdFtkaWN0Q29kZV07XHJcbiAgICAgICAgICAgIGZvciAoaW5kZXggaW4gZGljdEl0ZW1BcnJheSkge1xyXG4gICAgICAgICAgICAgICAgZGljdEl0ZW0gPSBkaWN0SXRlbUFycmF5W2luZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChkaWN0SXRlbS52YWx1ZSA9PSBkaWN0SXRlbUNvZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkaWN0SXRlbS50ZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQgPT0gbnVsbCA/IFwiLVwiIDogcmVzdWx0O1xyXG4gICAgfSxcclxufSJdLCJzb3VyY2VSb290IjoiIn0=